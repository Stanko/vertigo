(()=>{var ut=Object.create;var F=Object.defineProperty;var mt=Object.getOwnPropertyDescriptor;var dt=Object.getOwnPropertyNames,Z=Object.getOwnPropertySymbols,gt=Object.getPrototypeOf,J=Object.prototype.hasOwnProperty,ht=Object.prototype.propertyIsEnumerable;var K=(o,t,n)=>t in o?F(o,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[t]=n,m=(o,t)=>{for(var n in t||={})J.call(t,n)&&K(o,n,t[n]);if(Z)for(var n of Z(t))ht.call(t,n)&&K(o,n,t[n]);return o};var vt=(o,t)=>()=>(t||o((t={exports:{}}).exports,t),t.exports);var ft=(o,t,n,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let e of dt(t))!J.call(o,e)&&e!==n&&F(o,e,{get:()=>t[e],enumerable:!(i=mt(t,e))||i.enumerable});return o};var bt=(o,t,n)=>(n=o!=null?ut(gt(o)):{},ft(t||!o||!o.__esModule?F(n,"default",{value:o,enumerable:!0}):n,o));var nt=vt((_,z)=>{(function(o,t){typeof define=="function"&&define.amd?define([],t):typeof _<"u"?t():(t(),o.FileSaver={})})(_,function(){"use strict";function o(s,a){return typeof a>"u"?a={autoBom:!1}:typeof a!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),a={autoBom:!a}),a.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(s.type)?new Blob(["\uFEFF",s],{type:s.type}):s}function t(s,a,p){var c=new XMLHttpRequest;c.open("GET",s),c.responseType="blob",c.onload=function(){l(c.response,a,p)},c.onerror=function(){console.error("could not download file")},c.send()}function n(s){var a=new XMLHttpRequest;a.open("HEAD",s,!1);try{a.send()}catch{}return 200<=a.status&&299>=a.status}function i(s){try{s.dispatchEvent(new MouseEvent("click"))}catch{var a=document.createEvent("MouseEvents");a.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),s.dispatchEvent(a)}}var e=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof global=="object"&&global.global===global?global:void 0,r=e.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),l=e.saveAs||(typeof window!="object"||window!==e?function(){}:"download"in HTMLAnchorElement.prototype&&!r?function(s,a,p){var c=e.URL||e.webkitURL,u=document.createElement("a");a=a||s.name||"download",u.download=a,u.rel="noopener",typeof s=="string"?(u.href=s,u.origin===location.origin?i(u):n(u.href)?t(s,a,p):i(u,u.target="_blank")):(u.href=c.createObjectURL(s),setTimeout(function(){c.revokeObjectURL(u.href)},4e4),setTimeout(function(){i(u)},0))}:"msSaveOrOpenBlob"in navigator?function(s,a,p){if(a=a||s.name||"download",typeof s!="string")navigator.msSaveOrOpenBlob(o(s,p),a);else if(n(s))t(s,a,p);else{var c=document.createElement("a");c.href=s,c.target="_blank",setTimeout(function(){i(c)})}}:function(s,a,p,c){if(c=c||open("","_blank"),c&&(c.document.title=c.document.body.innerText="downloading..."),typeof s=="string")return t(s,a,p);var u=s.type==="application/octet-stream",v=/constructor/i.test(e.HTMLElement)||e.safari,d=/CriOS\/[\d]+/.test(navigator.userAgent);if((d||u&&v||r)&&typeof FileReader<"u"){var b=new FileReader;b.onloadend=function(){var h=b.result;h=d?h:h.replace(/^data:[^;]*;/,"data:attachment/file;"),c?c.location.href=h:location=h,c=null},b.readAsDataURL(s)}else{var g=e.URL||e.webkitURL,x=g.createObjectURL(s);c?c.location=x:location.href=x,c=null,setTimeout(function(){g.revokeObjectURL(x)},4e4)}});e.saveAs=l.saveAs=l,typeof z<"u"&&(z.exports=l)})});var wt=typeof window!="undefined",L=wt?!!window.localStorage.getItem("VERTIGO_DEBUG"):!1,A=255,B=6,P={resolution:25,minimumDotRadius:1,maximumDotRadius:5,distanceBetweenDots:2,invert:!0,plottingStep:0},k={minimumLineWidth:1,maximumLineWidth:5,distanceBetweenLines:1,startingRadius:4,invert:!0,plottingStep:0};function f(o,t=2){return parseFloat(o.toFixed(t))}function T(o,t,n,i){let e=o.getImageData(t,n,i,i),r=0;for(let s=0;s<e.data.length;s+=4){let a=e.data[s],p=e.data[s+1],c=e.data[s+2],u=e.data[s+3];r+=.299*a+.587*p+.114*c}let l=4;return r/(e.data.length/l)}function H(o,t,n){let i=document.createElementNS("http://www.w3.org/2000/svg","svg"),e=t?o/-2:0;return i.setAttribute("xmlns","http://www.w3.org/2000/svg"),i.setAttribute("class",n),i.setAttribute("viewBox",`${e} ${e} ${o} ${o}`),i}function U(o,t,n,i){let e=i-n;return o/t*e+n}function N(o,t,n){let i=document.createElement("canvas");i.width=t,i.height=t;let e=i.getContext("2d",{willReadFrequently:!0}),r=new Image;r.addEventListener("load",()=>{let l=0,s=0,a;r.height>r.width?(l=(r.height-r.width)/2,a=r.width):(s=(r.width-r.height)/2,a=r.height),e==null||e.drawImage(r,s,l,a,a,0,0,t,t),n(i)}),r.src=o}function Q(o,t,n){let i=U(o,A,t,n);return f(i,2)}function tt(o,t,n,i){let e=o*Math.cos(t),r=o*Math.sin(t),l=e-n/2+i/2,s=r-n/2+i/2;return{x:l,y:s}}function j(o,t,n){let e=m(m({},P),t);N(o,500,r=>{let l=r.getContext("2d"),s=[[]],a=500/2/(e.resolution+.5),p=[],{x:c,y:u}=tt(0,0,a,500),v=T(l,c,u,a);e.invert||(v=255-v),s[0][0]=Q(v,e.minimumDotRadius,e.maximumDotRadius),L&&p.push({x:c,y:u});for(let d=1;d<=e.resolution;d++){let b=d*a,g=d*B,x=360/g;s[d]=[];for(let h=0;h<g;h++){let y=Math.PI*(x*h)/180,{x:D,y:C}=tt(b,y,a,500),q=T(l,D,C,a);e.invert||(q=255-q),s[d][h]=Q(q,e.minimumDotRadius,e.maximumDotRadius),L&&p.push({x:D,y:C})}}n(s),L&&(l.strokeStyle="rgb(255, 180, 0, 0.3)",p.forEach(d=>{l.strokeRect(d.x,d.y,a,a)}),document.querySelector(".debug--dots").innerHTML="",document.querySelector(".debug--dots").appendChild(r))})}var I=class{constructor(t){this.imageURL=null;this.options=m(m({},P),t),this.radiusGrowStep=this.options.maximumDotRadius*2+this.options.distanceBetweenDots;let i=this.options.resolution*2*this.radiusGrowStep+this.options.maximumDotRadius*2;this.svg=H(i,!0,"vertigo vertigo--dots"),this.generateDots()}static createDot(t,n,i,e=""){let r=document.createElementNS("http://www.w3.org/2000/svg","circle");return e&&r.setAttribute("class",e),r.setAttribute("cx",t),r.setAttribute("cy",n),r.setAttribute("r",i.toString()),{element:r,x:t,y:n,scale:1}}generateDots(){let t=I.createDot("0","0",this.options.minimumDotRadius);this.dots=[[t]],this.svg.appendChild(t.element);for(let n=1;n<=this.options.resolution;n++){let i=n*this.radiusGrowStep,e=n*B,r=360/e;this.dots[n]=[];for(let l=0;l<e;l++){let s=Math.PI*(r*l)/180,a=(i*Math.cos(s)).toFixed(3),p=(i*Math.sin(s)).toFixed(3),c=I.createDot(a,p,this.options.minimumDotRadius);this.dots[n].push(c),this.svg.appendChild(c.element)}}}generatePlottingHelpers(t,n){let i=n.element.getAttribute("cx"),e=n.element.getAttribute("cy"),r=parseFloat(i),l="plotting-helper";if(t>1){let s=document.createElementNS("http://www.w3.org/2000/svg","path"),a=`M ${r-.1} ${e} l 0.01 0`;s.setAttribute("d",a),s.setAttribute("class",l),s.setAttribute("stroke-linecap","round"),this.svg.appendChild(s)}for(let s=this.options.plottingStep;s<t;s+=this.options.plottingStep){let a=I.createDot(i,e,s,l);this.svg.appendChild(a.element)}}drawImage(t){this.imageURL=null,this.svg.querySelectorAll(".plotting-helper").forEach(n=>{this.svg.removeChild(n)}),t.forEach((n,i)=>{n.forEach((e,r)=>{var s;let l=(s=this.dots)==null?void 0:s[i];if(l){let a=l[r];a.scale!==e&&(a.scale=e,a.element.setAttribute("r",e.toString())),this.options.plottingStep>0?(this.svg.classList.add("vertigo--plotting"),this.generatePlottingHelpers(e,a)):this.svg.classList.remove("vertigo--plotting")}})})}convertImage(t,n){j(t,this.options,i=>{this.drawImage(i),this.imageURL=t,n&&n(i)})}removeDots(){var t;(t=this.dots)==null||t.forEach(n=>{n.forEach(i=>{var e;(e=i.element.parentNode)==null||e.removeChild(i.element)})})}setOptions(t,n){this.options=m(m({},this.options),t),this.radiusGrowStep=this.options.maximumDotRadius*2+this.options.distanceBetweenDots;let e=this.options.resolution*2*this.radiusGrowStep+this.options.maximumDotRadius*2;this.svg.setAttribute("viewBox",`${e/-2} ${e/-2} ${e} ${e}`),this.removeDots(),this.generateDots(),this.imageURL&&this.convertImage(this.imageURL,n)}getOptions(){return m({},this.options)}};function W(o,t,n){let e=m(m({},k),t);N(o,500,r=>{let l=r.getContext("2d"),s=[],a=[],p=500/2,c=Math.round((e.distanceBetweenLines+e.maximumLineWidth)*.8),u=(e.distanceBetweenLines+e.maximumLineWidth)/(2*Math.PI),d=Math.floor((500-e.startingRadius*2)/(e.distanceBetweenLines+e.maximumLineWidth))*Math.PI,b=3/e.startingRadius;for(let g=0;g<d;g+=b){let x=e.startingRadius+u*g,h=f(p+x*Math.cos(g),3),y=f(p+x*Math.sin(g),3);s.push({x:h,y});let D=T(l,h,y,c);e.invert||(D=255-D);let C=U(D,A,e.minimumLineWidth,e.maximumLineWidth);b=3/x,a.push({x:h,y,width:C})}n(a),L&&(l.strokeStyle="rgb(255, 180, 0, 0.3)",s.forEach(g=>{l.strokeRect(g.x,g.y,c,c)}),document.querySelector(".debug--spiral").innerHTML="",document.querySelector(".debug--spiral").appendChild(r))})}var xt=(o,t)=>{let n=t.x-o.x,i=t.y-o.y;return{length:Math.sqrt(Math.pow(n,2)+Math.pow(i,2)),angle:Math.atan2(i,n)}},et=(o,t,n,i=!1)=>{let l=xt(t||o,n||o),s=l.angle+(i?Math.PI:0),a=l.length*.2,p=o.x+Math.cos(s)*a,c=o.y+Math.sin(s)*a;return{x:p,y:c}},It=(o,t,n)=>{let i=et(n[t-1],n[t-2],o),e=et(o,n[t-1],n[t+1],!0);return`C ${i.x},${i.y} ${e.x},${e.y} ${o.x},${o.y}`};function M(o,t="M"){return o.reduce((i,e,r,l)=>r===0?`${t} ${e.x},${e.y}`:`${i} ${It(e,r,l)}`,"")}var St=500,w=class{constructor(t){this.imageURL=null;this.options=m(m({},k),t),this.svg=H(St,!1,"vertigo vertigo--spiral"),this.svgPath=document.createElementNS("http://www.w3.org/2000/svg","path"),this.svg.appendChild(this.svgPath)}convertImage(t,n){W(t,this.options,i=>{this.drawImage(i),this.imageURL=t,n&&n(i)})}static getOuterDots(t,n,i){let e=w.getAngleBetweenThreeDots(t,n,i)/2,r=100;e>0&&(r=-100);let l=w.getAngleBetweenThreeDots(t,n,{x:n.x+r,y:n.y}),s=f(l-e,2),a=n.width/2,p={x:f(n.x+a*Math.cos(s),2),y:f(n.y-a*Math.sin(s),2)},c={x:f(n.x+a*Math.cos(s+Math.PI),2),y:f(n.y-a*Math.sin(s+Math.PI),2)};return[p,c]}static getVector(t,n){return{x:t.x-n.x,y:t.y-n.y}}static getAngleBetweenThreeDots(t,n,i){let e=w.getVector(n,t),r=w.getVector(n,i);return Math.atan2(r.y,r.x)-Math.atan2(e.y,e.x)}generatePath(t){let n=[],i=[];for(let e=1;e<t.length-1;e++){let r=t[e-1],l=t[e],s=t[e+1],a=w.getOuterDots(r,l,s);n.push(a[0]),i.push(a[1])}return M(n,"M")+M(i.reverse(),"L")+"Z"}generatePlottingHelpers(t){let n=t.map(r=>m({},r)),i=t.map(r=>m({},r));i.shift(),i.pop();let e=document.createElementNS("http://www.w3.org/2000/svg","path");e.setAttribute("class","plotting-helper"),e.setAttribute("d",M(i)),this.svg.appendChild(e);for(let r=this.options.plottingStep;r<this.options.maximumLineWidth;r+=this.options.plottingStep){n.forEach(a=>{a.width=a.width-this.options.plottingStep,a.width<0&&(a.width=0)});let l=this.generatePath(n),s=document.createElementNS("http://www.w3.org/2000/svg","path");s.setAttribute("class","plotting-helper"),s.setAttribute("d",l),this.svg.appendChild(s)}}drawImage(t){this.svgPath.setAttribute("d",this.generatePath(t)),this.svg.querySelectorAll(".plotting-helper").forEach(n=>{this.svg.removeChild(n)}),this.options.plottingStep>0?(this.svg.classList.add("vertigo--plotting"),this.generatePlottingHelpers(t)):this.svg.classList.remove("vertigo--plotting")}setOptions(t,n){this.options=m(m({},this.options),t),this.imageURL&&this.convertImage(this.imageURL,n)}getOptions(){return m({},this.options)}};var ot=bt(nt(),1);function V({callback:o,label:t,max:n,min:i,name:e,step:r=1,value:l,helperText:s=""}){let a=document.createElement("span");a.className="option-focus";let p=document.createElement("label");p.className="option-name",p.innerHTML=`${t}: `,s&&(p.classList.add("option-name--has-helper-text"),p.title=s);let c=document.createElement("span");c.innerHTML=` ${l}`;let u=document.createElement("input");u.setAttribute("type","range"),u.setAttribute("min",i),u.setAttribute("max",n),u.setAttribute("value",l),u.setAttribute("step",r.toString()),u.setAttribute("class",`OptionsInput OptionsInput--${e}`),u.addEventListener("change",d=>{let b=d.target.value;o(e,b),c.innerHTML=` ${b}`});let v=document.createElement("div");return v.className="option",v.appendChild(p),v.appendChild(c),v.appendChild(u),v.appendChild(a),v}function X({callback:o,label:t,name:n,value:i}){let e=document.createElement("label");e.className="checkbox",e.innerHTML=` ${t}`;let r=document.createElement("input");r.setAttribute("type","checkbox"),r.setAttribute("checked",i),r.className=`OptionsInput OptionsInput--${n}`,r.addEventListener("change",p=>{o(n,p.target.checked)});let l=document.createElement("span");l.className="checkbox-icon",l.innerHTML=`<svg viewBox="0 0 14 14">
<path
fill="none"
stroke="white"
stroke-linejoin="round"
stroke-linecap="round"
stroke-width="2.5" d="M 3 7.5 l 3 3 l 5 -7"
/>
</svg>`;let s=document.createElement("span");s.className="checkbox-focus",e.prepend(s),e.prepend(l),e.prepend(r);let a=document.createElement("div");return a.appendChild(e),a}var Dt={distanceBetweenDots:"dist",distanceBetweenLines:"dist",startingRadius:"start"};function Y(o,t){let n=o.getOptions();console.log(o.imageURL);let i=t;Object.keys(n).forEach(e=>{let r=Dt[e]||e.substr(0,3);i+=`_${r}-${n[e]}`}),i+=".svg",(0,ot.saveAs)(`data:application/octet-stream;base64,${btoa(o.svg.outerHTML)}`,i)}function it(){let o=Math.random()*3+1;return f(o,2)}function Lt(o){let t=[[it()]],n=6;for(let i=1;i<=o;i++){let e=i*n;t[i]=[];for(let r=0;r<e;r++)t[i].push(it())}return t}var st=Lt;var lt=document.querySelector(".example--hello"),Et=document.querySelector(".output-content--dots"),Ot=document.querySelector(".output-svg-wrapper--dots"),at=document.querySelector(".file-input--dots"),ct=document.querySelector(".options--dots"),Rt=document.querySelector(".button--dots-download"),yt=document.querySelector(".button--dots-random"),$={minimumDotRadius:1,maximumDotRadius:5,distanceBetweenDots:1,resolution:25,invert:!0,plottingStep:0};function E(o,t){$[o]=parseFloat(t),o==="invert"&&($[o]=Boolean(t)),S.setOptions($,()=>{o==="invert"&&Et.classList.toggle("output-content--invert")})}var Tt=[{callback:E,label:"Resolution",max:50,min:5,name:"resolution",value:25},{callback:E,label:"Min dot radius",max:5,min:0,name:"minimumDotRadius",value:1},{callback:E,label:"Max dot radius",max:20,min:1,name:"maximumDotRadius",value:5},{callback:E,label:"Distance",max:20,min:0,name:"distanceBetweenDots",value:1},{callback:E,label:"Pen plotting step",max:5,min:0,name:"plottingStep",value:0,step:.1,helperText:"If not zero, this option will create concentric circles which are useful for for pen plotting."}],Mt={callback:E,label:"Invert colors",name:"invert",value:!0};Tt.forEach(o=>{ct.appendChild(V(o))});ct.appendChild(X(Mt));var S=new I($);Ot.appendChild(S.svg);at.addEventListener("change",()=>{let o=at.files[0],t=URL.createObjectURL(o);S.convertImage(t)});Rt.addEventListener("click",()=>Y(S,"vertigo"));yt.addEventListener("click",()=>{S.drawImage(st(S.getOptions().resolution))});S.convertImage(lt.getAttribute("src"));var pt=document.querySelector(".options--spiral"),Ct=document.querySelector(".button--spiral-download"),rt=document.querySelector(".file-input--spiral"),At=document.querySelector(".output-svg-wrapper--spiral"),Bt=document.querySelector(".output-content--spiral"),G={minimumLineWidth:1,maximumLineWidth:5,distanceBetweenLines:1,startingRadius:3,invert:!0,plottingStep:0};function O(o,t){G[o]=parseFloat(t),o==="invert"&&(G[o]=Boolean(t)),R.setOptions(G,()=>{o==="invert"&&Bt.classList.toggle("output-content--invert")})}var Pt=[{callback:O,label:"Min line width",min:0,max:5,name:"minimumLineWidth",value:1,step:.5},{callback:O,label:"Max line width",min:1,max:20,name:"maximumLineWidth",value:5,step:.5},{callback:O,label:"Distance",min:0,max:10,name:"distanceBetweenLines",value:1,step:.5},{callback:O,label:"Starting radius",min:3,max:300,name:"startingRadius",value:3,step:.5},{callback:O,label:"Pen plotting step",max:10,min:0,name:"plottingStep",value:0,step:.5,helperText:"If not zero, this option will create concentric paths which are useful for for pen plotting."}],kt={callback:O,label:"Invert colors",name:"invert",value:!0};Pt.forEach(o=>{pt.appendChild(V(o))});pt.appendChild(X(kt));var R=new w(G);At.appendChild(R.svg);rt.addEventListener("change",()=>{let o=rt.files[0],t=URL.createObjectURL(o);R.convertImage(t)});Ct.addEventListener("click",()=>Y(R,"spiral"));R.convertImage(lt.getAttribute("src"));var Ht=document.querySelectorAll(".examples-button");Array.prototype.slice.call(Ht).forEach(o=>{o.addEventListener("click",t=>{let i=document.querySelector(t.target.getAttribute("data-image")).getAttribute("src");t.target.getAttribute("data-type")==="dots"?S.convertImage(i):R.convertImage(i)})});var Ut=document.querySelector(".toggle-debug");Ut.addEventListener("click",()=>{window.localStorage.getItem("VERTIGO_DEBUG")?window.localStorage.removeItem("VERTIGO_DEBUG"):window.localStorage.setItem("VERTIGO_DEBUG","1"),window.location.replace(window.location.pathname)});})();
//# sourceMappingURL=docs.js.map
