parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"RhqW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DEBUG=!1,exports.MAXIMUM_BRIGHTNESS=255,exports.DOT_INCREMENT_STEP=6,exports.dotsDefaultOptions={resolution:25,minimumDotRadius:1,maximumDotRadius:5,distanceBetweenDots:2},exports.spiralDefaultOptions={minimumLineWidth:1,maximumLineWidth:5,distanceBetweenLines:1,startingRadius:4};
},{}],"eAYL":[function(require,module,exports) {
"use strict";function t(t,e){return void 0===e&&(e=2),parseFloat(t.toFixed(e))}function e(t,e,a,r){for(var n=t.getImageData(e,a,r,r),i=0,o=0;o<n.data.length;o+=4){var d=n.data[o],s=n.data[o+1],g=n.data[o+2];n.data[o+3];i+=.299*d+.587*s+.114*g}return i/(n.data.length/4)}function a(t,e,a){var r=document.createElementNS("http://www.w3.org/2000/svg","svg"),n=e?t/-2:0;return r.setAttribute("class",a),r.setAttribute("viewBox",n+" "+n+" "+t+" "+t),r}function r(t,e,a,r){return t/e*(r-a)+a}function n(t,e,a){var r=document.createElement("canvas");r.width=e,r.height=e;var n=r.getContext("2d"),i=new Image;i.addEventListener("load",function(){var t,o=0,d=0;i.height>i.width?(o=(i.height-i.width)/2,t=i.width):(d=(i.width-i.height)/2,t=i.height),n.drawImage(i,d,o,t,t,0,0,e,e),a(r)}),i.src=t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.toFixed=t,exports.getRectBrightness=e,exports.createSvg=a,exports.mapRange=r,exports.drawImageOnCanvas=n;
},{}],"XFcH":[function(require,module,exports) {
"use strict";var t=this&&this.__assign||function(){return(t=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./helpers"),r=require("./constants");function n(t,n,o){var a=e.mapRange(t,r.MAXIMUM_BRIGHTNESS,n,o);return e.toFixed(a,2)}function o(t,e,r,n){return{x:t*Math.cos(e)-r/2+n/2,y:t*Math.sin(e)-r/2+n/2}}function a(a,i,s){var u=t(t({},r.dotsDefaultOptions),i);e.drawImageOnCanvas(a,500,function(t){var a=t.getContext("2d"),i=[[]],c=250/(u.resolution+.5),d=[],f=o(0,0,c,500),h=f.x,m=f.y,p=e.getRectBrightness(a,h,m,c);i[0][0]=n(p,u.minimumDotRadius,u.maximumDotRadius),r.DEBUG&&d.push({x:h,y:m});for(var l=1;l<=u.resolution;l++){var v=l*c,y=l*r.DOT_INCREMENT_STEP,x=360/y;i[l]=[];for(var g=0;g<y;g++){var R=o(v,Math.PI*(x*g)/180,c,500),D=R.x,E=R.y,M=e.getRectBrightness(a,D,E,c);i[l][g]=n(M,u.minimumDotRadius,u.maximumDotRadius),r.DEBUG&&d.push({x:D,y:E})}}s(i),r.DEBUG&&(a.strokeStyle="orange",d.forEach(function(t){a.strokeRect(t.x,t.y,c,c)}),document.querySelector("body").appendChild(t))})}exports.default=a;
},{"./helpers":"eAYL","./constants":"RhqW"}],"GOHQ":[function(require,module,exports) {
"use strict";var t=this&&this.__assign||function(){return(t=Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var s in e=arguments[i])Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t}).apply(this,arguments)},e=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0});var i=require("./constants"),o=require("./helpers"),s=e(require("./convert-image-to-dots")),r=function(){function e(e){this.options=t(t({},i.dotsDefaultOptions),e),this.radiusGrowStep=2*this.options.maximumDotRadius+this.options.distanceBetweenDots;var s=2*this.options.resolution*this.radiusGrowStep+2*this.options.maximumDotRadius;this.svg=o.createSvg(s,!0,"Vertigo"),this.generateDots()}return e.createDot=function(t,e,i,o){void 0===o&&(o="Dots-dot");var s=document.createElementNS("http://www.w3.org/2000/svg","circle");return s.setAttribute("class",o),s.setAttribute("cx",t),s.setAttribute("cy",e),s.setAttribute("r",i.toString()),{element:s,x:t,y:e,scale:1}},e.prototype.generateDots=function(){var t=e.createDot("0","0",this.options.minimumDotRadius);this.dots=[[t]],this.svg.appendChild(t.element);for(var o=1;o<=this.options.resolution;o++){var s=o*this.radiusGrowStep,r=o*i.DOT_INCREMENT_STEP,n=360/r;this.dots[o]=[];for(var a=0;a<r;a++){var u=Math.PI*(n*a)/180,h=(s*Math.cos(u)).toFixed(3),p=(s*Math.sin(u)).toFixed(3),c=e.createDot(h,p,this.options.minimumDotRadius);this.dots[o].push(c),this.svg.appendChild(c.element)}}},e.prototype.drawImage=function(t){var e=this;t.forEach(function(t,i){t.forEach(function(t,o){var s=e.dots[i];if(s){var r=s[o];r.scale!==t&&(r.scale=t,r.element.setAttribute("r",t.toString()))}})})},e.prototype.convertImage=function(t,e){var i=this;s.default(t,this.options,function(o){i.drawImage(o),i.imageURL=t,e&&e(o)})},e.prototype.removeDots=function(){this.dots.forEach(function(t){t.forEach(function(t){t.element.parentNode.removeChild(t.element)})})},e.prototype.setOptions=function(e,i){this.options=t(t({},this.options),e),this.radiusGrowStep=2*this.options.maximumDotRadius+this.options.distanceBetweenDots;var o=2*this.options.resolution*this.radiusGrowStep+2*this.options.maximumDotRadius;this.svg.setAttribute("viewBox",o/-2+" "+o/-2+" "+o+" "+o),this.removeDots(),this.generateDots(),this.imageURL&&this.convertImage(this.imageURL,i)},e}();exports.default=r;
},{"./constants":"RhqW","./helpers":"eAYL","./convert-image-to-dots":"XFcH"}],"IkyE":[function(require,module,exports) {
"use strict";var t=this&&this.__assign||function(){return(t=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var a in e=arguments[i])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t}).apply(this,arguments)};Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./helpers"),i=require("./constants");function n(n,a,r){var s=t(t({},i.spiralDefaultOptions),a);e.drawImageOnCanvas(n,500,function(t){for(var n=t.getContext("2d"),a=[],o=[],u=Math.round(.8*(s.distanceBetweenLines+s.maximumLineWidth)),d=(s.distanceBetweenLines+s.maximumLineWidth)/(2*Math.PI),h=Math.floor((500-2*s.startingRadius)/(s.distanceBetweenLines+s.maximumLineWidth))*Math.PI,c=3/s.startingRadius,m=0;m<h;m+=c){var p=s.startingRadius+d*m,l=e.toFixed(250+p*Math.cos(m),3),f=e.toFixed(250+p*Math.sin(m),3);a.push({x:l,y:f});var g=e.getRectBrightness(n,l,f,u),x=e.mapRange(g,i.MAXIMUM_BRIGHTNESS,s.minimumLineWidth,s.maximumLineWidth);c=3/p,o.push({x:l,y:f,width:x})}r(o),i.DEBUG&&(n.strokeStyle="orange",a.forEach(function(t){n.strokeRect(t.x,t.y,u,u)}),document.querySelector("body").appendChild(t))})}exports.default=n;
},{"./helpers":"eAYL","./constants":"RhqW"}],"Idg0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=.2,e=function(t,e){var n=e.x-t.x,r=e.y-t.y;return{length:Math.sqrt(Math.pow(n,2)+Math.pow(r,2)),angle:Math.atan2(r,n)}},n=function(n,r,a,u){void 0===u&&(u=!1);var o=e(r||n,a||n),x=o.angle+(u?Math.PI:0),c=o.length*t;return{x:n.x+Math.cos(x)*c,y:n.y+Math.sin(x)*c}},r=function(t,e,r){var a=n(r[e-1],r[e-2],t),u=n(t,r[e-1],r[e+1],!0);return"C "+a.x+","+a.y+" "+u.x+","+u.y+" "+t.x+","+t.y};function a(t){return t.reduce(function(t,e,n,a){return 0===n?"M "+e.x+","+e.y:t+" "+r(e,n,a)},"")}exports.default=a;
},{}],"Dg0j":[function(require,module,exports) {
"use strict";var t=this&&this.__assign||function(){return(t=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var s in e=arguments[r])Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t}).apply(this,arguments)},e=this&&this.__spreadArrays||function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;var n=Array(t),s=0;for(e=0;e<r;e++)for(var i=arguments[e],o=0,a=i.length;o<a;o++,s++)n[s]=i[o];return n},r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0});var n=require("./constants"),s=require("./helpers"),i=r(require("./convert-image-to-spiral")),o=r(require("./smooth-line")),a=null,h=!1,u=500,g=function(){function r(e){this.options=t(t({},n.spiralDefaultOptions),e),this.svg=s.createSvg(u,!1,"Spiral"),this.svgPath=document.createElementNS("http://www.w3.org/2000/svg","path"),this.svgPath.setAttribute("class","Spiral-path"),this.svg.appendChild(this.svgPath)}return r.prototype.convertImage=function(t,e){var r=this;i.default(t,this.options,function(n){r.drawImage(n),r.imageURL=t,e&&e(n)})},r.getOuterDots=function(t,e,n){var i=r.getAngleBetweenThreeDots(t,e,n)/2,o=r.getAngleBetweenThreeDots(t,e,{x:e.x+100,y:e.y}),u=s.toFixed(o-i,2),g=e.width/2,p=[{x:s.toFixed(e.x+g*Math.cos(u),2),y:s.toFixed(e.y-g*Math.sin(u),2)},{x:s.toFixed(e.x+g*Math.cos(u+Math.PI),2),y:s.toFixed(e.y-g*Math.sin(u+Math.PI),2)}];return null===a&&(a=u),u>Math.PI&&a<Math.PI&&(h=!h),a=u,h?p.reverse():p},r.getVector=function(t,e){return{x:t.x-e.x,y:t.y-e.y}},r.getAngleBetweenThreeDots=function(t,e,n){var s=r.getVector(e,t),i=r.getVector(e,n);return Math.atan2(i.y,i.x)-Math.atan2(s.y,s.x)},r.prototype.drawImage=function(t){for(var n=[],s=[],i=1;i<t.length-1;i++){var a=t[i-1],h=t[i],u=t[i+1],g=r.getOuterDots(a,h,u);n.push(g[0]),s.push(g[1])}var p=e(n,s.reverse());this.svgPath.setAttribute("d",o.default(p))},r.prototype.setOptions=function(e,r){this.options=t(t({},this.options),e),this.imageURL&&this.convertImage(this.imageURL,r)},r}();exports.default=g;
},{"./constants":"RhqW","./helpers":"eAYL","./convert-image-to-spiral":"IkyE","./smooth-line":"Idg0"}],"w4sW":[function(require,module,exports) {
"use strict";function e(e){var t=e.callback,n=e.label,a=e.max,r=e.min,i=e.name,u=e.step,l=void 0===u?"1":u,p=e.value,s=document.createElement("span");s.innerHTML="("+r+" - "+a+")";var c=document.createElement("label");c.innerHTML=n+": ",c.appendChild(s);var d=document.createElement("span");d.innerHTML=" "+p;var m=document.createElement("input");m.setAttribute("type","range"),m.setAttribute("min",r),m.setAttribute("max",a),m.setAttribute("value",p),m.setAttribute("step",l),m.setAttribute("class","OptionsInput OptionsInput--"+i),m.addEventListener("change",function(e){t(i,e.target.value),d.innerHTML=" "+e.target.value});var o=document.createElement("div");return o.appendChild(c),o.appendChild(m),o.appendChild(d),o}Object.defineProperty(exports,"__esModule",{value:!0}),exports.createOption=e;
},{}],"utTU":[function(require,module,exports) {
"use strict";var e=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});var t=e(require("./vertigo")),a=e(require("./spiral")),n=require("./demo-helpers"),i=document.querySelector(".TestImage--hello"),r=document.querySelector(".SvgWrapper-svg--dots"),o=document.querySelector(".FileInput--dots"),l=document.querySelector(".Options--dots"),u=document.querySelector(".Button--dotsDownload"),c={minimumDotRadius:1,maximumDotRadius:5,distanceBetweenDots:1,resolution:25};function m(){u.href="data:application/octet-stream;base64,"+btoa(r.innerHTML)}function s(e,t){c[e]=parseInt(t,10),p.setOptions(c,m)}var d=[{callback:s,label:"Resolution",max:50,min:5,name:"resolution",value:25},{callback:s,label:"Minimum dot radius",max:5,min:0,name:"minimumDotRadius",value:1},{callback:s,label:"Maximum dot radius",max:20,min:1,name:"maximumDotRadius",value:5},{callback:s,label:"Distance between dots",max:20,min:0,name:"distanceBetweenDots",value:2}];d.forEach(function(e){l.appendChild(n.createOption(e))});var p=new t.default(c);r.appendChild(p.svg),o.addEventListener("change",function(){var e=o.files[0],t=URL.createObjectURL(e);p.convertImage(t,m)}),p.convertImage(i.getAttribute("src"),m);var v=document.querySelector(".Options--spiral"),b=document.querySelector(".Button--spiralDownload"),g=document.querySelector(".FileInput--spiral"),f=document.querySelector(".SvgWrapper-svg--spiral"),h={minimumLineWidth:1,maximumLineWidth:5,distanceBetweenLines:1,startingRadius:5};function x(){b.href="data:application/octet-stream;base64,"+btoa(f.innerHTML)}function y(e,t){h[e]=parseInt(t,10),q.setOptions(h,x)}var L=[{callback:y,label:"Minimum line width",min:0,max:5,name:"minimumLineWidth",value:1},{callback:y,label:"Maximum line width",min:1,max:20,name:"maximumLineWidth",value:5},{callback:y,label:"Distance between lines",min:0,max:10,name:"distanceBetweenLines",value:1},{callback:y,label:"Starting radius",min:3,max:300,name:"startingRadius",value:5}];L.forEach(function(e){v.appendChild(n.createOption(e))});var q=new a.default(h);f.appendChild(q.svg),g.addEventListener("change",function(){var e=g.files[0],t=URL.createObjectURL(e);q.convertImage(t,x)}),q.convertImage(i.getAttribute("src"),x);var S=document.querySelectorAll(".TestImageButton");Array.prototype.slice.call(S).forEach(function(e){e.addEventListener("click",function(e){var t=document.querySelector(e.target.getAttribute("data-image")).getAttribute("src");"dots"===e.target.getAttribute("data-type")?p.convertImage(t,m):q.convertImage(t,x)})});
},{"./vertigo":"GOHQ","./spiral":"Dg0j","./demo-helpers":"w4sW"}]},{},["utTU"], null)
//# sourceMappingURL=/vertigo/demo.8ce2ab21.js.map